<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>

</h:head>
<h:body>
	#{userBean.isLogged()}
	<h:form>
		<h1>Chat</h1>
		<p:panel header="Your messages">
			<p:inputText id="input1" value="#{messageBean.text}" />
			<p:commandButton value="Submit" id="ajax" update="@form" 
				actionListener="#{messageBean.addMessage}"
				styleClass="ui-priority-primary" />
		</p:panel>
		<p:panel header="All messages" id="messages" var="message">
			<p:dataList value="#{messageBean.getMessages()}" var="message">
				#{message.getUser().getNick()}: #{message.getText()}
			</p:dataList>
		</p:panel>
	</h:form>
</h:body>
</html>